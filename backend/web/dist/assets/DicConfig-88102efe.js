import{h as S,U as A,a as H,b as P,s as V,r as T,e as j,o as q,g as C,i as c,j as o,u as b,w as y,F as L,q as p,f,k as h,n as E,v as I,t as M}from"./index-3ce84ad1.js";import{t as N}from"./type1-5769e1dc.js";import{F as R}from"./type2-77b368a9.js";import{_ as z}from"./_plugin-vue_export-helper-c27b6911.js";const U=async g=>await S.Post(A.workType,g),G={style:{float:"left",width:"48%"}},J={style:{float:"right",width:"48%"}},O={style:{padding:"10px","margin-bottom":"10px",background:"white"}},Q={style:{padding:"10px","margin-bottom":"10px",background:"white"}},W=H({__name:"DicConfig",setup(g){const t=P({type1Data:{},type2Data:{}}),{type1Data:u}=V(N()),{getType1List:k,FindType1ByDescription:X}=N(),s=T({key:"工作类别",title:"工作类别",children:[]}),_=999999,r=T([_]),w=j(()=>[{key:_,title:"工作大类",children:s.value.children}]);q(async()=>{await k(),t.type2Data.pid=u.value[0].id,D()});const D=async()=>{const i=u.value;if(i.length){const a=i[0].id;t.type2Data.pid=a,s.value.children=[],r.value=[_];const v=i.map(async n=>{const d={title:n.description,key:n.id,children:[]};r.value.push(n.id);const e=await R({pid:n.id});if(e.data.type_list){const K=e.data.type_list.map(x=>({title:x.description,key:x.id}));d.children=K}return s.value.children===void 0&&(s.value.children=[]),s.value.children.push(d),d}),l={key:"工作类别",title:"工作类别",children:await Promise.all(v)};w.value.push(l)}},B=async()=>{t.type1Data.description!==""&&(t.type1Data.type=1,t.type1Data.pid=0,await U(t.type1Data),await k(),t.type1Data.description="",D())},F=async()=>{t.type2Data.description!==""&&(t.type2Data.type=2,await U(t.type2Data),t.type2Data.description="",D())};return(i,a)=>{const v=p("a-tree"),m=p("a-input"),l=p("a-button"),n=p("a-select-option"),d=p("a-select");return f(),C(L,null,[c("div",G,[o(v,{"tree-data":b(w),expandedKeys:r.value,"onUpdate:expandedKeys":a[0]||(a[0]=e=>r.value=e)},null,8,["tree-data","expandedKeys"])]),c("div",J,[c("div",O,[o(m,{style:{width:"80%"},value:t.type1Data.description,"onUpdate:value":a[1]||(a[1]=e=>t.type1Data.description=e),placeholder:"请输入工作大类"},null,8,["value"]),o(l,{onClick:B,type:"primary"},{default:y(()=>[h("添加")]),_:1})]),c("div",Q,[o(d,{ref:"select",value:t.type2Data.pid,"onUpdate:value":a[2]||(a[2]=e=>t.type2Data.pid=e),class:"SelectClass"},{default:y(()=>[(f(!0),C(L,null,E(b(u),e=>(f(),I(n,{value:e.id,key:e.id},{default:y(()=>[h(M(e.description),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"]),o(m,{class:"SelectClass",value:t.type2Data.description,"onUpdate:value":a[3]||(a[3]=e=>t.type2Data.description=e),placeholder:"请输入工作大类"},null,8,["value"]),o(l,{onClick:F,type:"primary"},{default:y(()=>[h("添加")]),_:1})])])],64)}}});const at=z(W,[["__scopeId","data-v-e0d8c8b0"]]);export{at as default};
